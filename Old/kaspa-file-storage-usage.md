# Kaspa File Storage - 使用方法

## 使い方（簡単3ステップ）

### 📤 ファイルをアップロードする

#### 1. HTMLファイルを開く
- `kaspa-file-storage.html` をブラウザで開く
- スマホでもPCでもOK

#### 2. ファイルを準備する
- 「ファイル選択」でアップロードしたいファイルを選択（24KB以下）
- 「Secret identifier」に覚えやすい秘密のキーワードを入力
  - 例: `my_secret_photos_2025`
- 「Prepare Transaction」ボタンを押す

#### 3. ウォレットで送信
- 画面に表示されるJSONをコピー
- あなたのKaspaウォレットで以下を設定：
  - **UTXO情報**: `"YOUR_UTXO_TXID_HERE"` を実際のUTXO IDに変更
  - **送信先**: `"YOUR_ADDRESS_SCRIPT_HERE"` を自分のアドレスに変更
  - **ペイロード**: そのまま使用
- トランザクション送信！

### 📥 ファイルをダウンロードする

#### 1. 秘密キーを入力
- 「Secret identifier」にアップロード時と同じキーワードを入力
- 「Search Files」ボタンを押す

#### 2. 自動検索
- システムが最新100ブロックを自動検索
- あなたのファイルを見つけたら一覧表示

#### 3. ダウンロード
- 「Download」ボタンでファイルを復元
- 元のファイル名で自動ダウンロード

## 詳細手順

### ウォレット設定の例

**トランザクションJSONの例**:
```json
{
  "inputs": [{
    "previousOutpoint": {
      "transactionId": "abc123...",  // ← これを変更
      "index": 0
    }
  }],
  "outputs": [{
    "scriptPublicKey": {
      "scriptPublicKey": "76a914xyz..."  // ← これを変更  
    }
  }],
  "payload": "48656c6c6f..."  // ← これはそのまま
}
```

### UTXO情報の取得方法
1. Kaspaウォレットの「残高」を確認
2. 利用可能なUTXOのトランザクションIDをコピー
3. JSONの `transactionId` に貼り付け

### アドレス情報の取得方法
1. 自分のKaspaアドレスを確認
2. アドレスからスクリプト形式に変換（ウォレットが自動処理）
3. JSONの `scriptPublicKey` に設定

## 注意点

### ✅ 推奨用途
- **設定ファイル**: JSON、テキスト
- **小さな画像**: アイコン、QRコード  
- **文書**: メモ、パスワード
- **鍵ファイル**: 公開鍵、証明書

### ⚠️ 制限事項
- **ファイルサイズ**: 24KB以下
- **検索時間**: 20秒程度（100ブロック）
- **手数料**: Kaspaネットワーク手数料が必要
- **ウォレット**: 手動でUTXO/アドレス設定必要

### 🔒 セキュリティ
- **秘密キー**: 絶対に他人に教えない
- **共有**: 秘密キーを教えれば他人もファイルアクセス可能
- **匿名性**: アドレスとファイルの関連は秘密キーを知らない限り不明

## トラブルシューティング

### ファイルが見つからない
- 秘密キーが間違っていないか確認
- トランザクションが送信されているか確認
- もう少し待ってから再検索

### アップロードできない
- ファイルサイズが24KB以下か確認
- ウォレットに十分な残高があるか確認
- UTXO情報が正確か確認

### エラーが出る
- ブラウザのコンソールでエラー詳細を確認
- インターネット接続を確認
- しばらく時間をおいて再試行

## 実例

### 例1: 設定ファイルの保存
```
1. config.json (2KB)を選択
2. 秘密キー: "my_app_config_backup"  
3. トランザクション送信
4. 後日同じ秘密キーで復元
```

### 例2: 写真の共有
```
1. photo.jpg (50KB)を選択
2. 秘密キー: "family_vacation_2025"
3. 家族に秘密キーを共有
4. 家族が同じキーでダウンロード
```

---
**重要**: 秘密キーは安全に管理してください。忘れるとファイルを取り出せません！